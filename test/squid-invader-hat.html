<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Squid Invader Hat</title>
  <meta name="description" content="The world is being invaded by squid aliens and you are humanity’s last hope. What’s left for you to do? Show your new cephalopod overlords that you are on th...">

  <link rel="icon" type="image/png" href="/favicon.png" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:800,800i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i" rel="stylesheet">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://squidzapparel.com/test/squid-invader-hat">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://sdks.shopifycdn.com/js-buy-sdk/v0/latest/shopify-buy.umd.polyfilled.min.js"></script>
  
  

  <script>
var shopClient = ShopifyBuy.buildClient({
  accessToken: '4d4c4181de6648ffd56fbb467fe79f37',
  domain: 'squidz-apparel.myshopify.com',
  appId: '6'
});
var cart;
shopClient.createCart().then(function (newCart) {
  cart = newCart;
  // do something with updated cart
});
</script>
</head>


  <body>

    <header class="header" role="banner">

  <div class="container">

    <div class="grid-middle">

      <div class="col-5 nav-left">
        <a class="nav-link" href="/">Hats</a>
        <a class="nav-link" href="/">Shirts</a>
        <a class="nav-link" href="/">Hoodies</a>
        <a class="nav-link" href="/">Shoes</a>
      </div>

      <div class="col-2">
        <a class="logo" href="/"><img src="/assets/images/logo.svg"/></a>
      </div>
      
      <div class="col-5 text-right nav-right">
        <a class="nav-link" href="/">About</a>
        <a class="nav-link" href="/">Faqs</a>
        <a class="nav-link" href="/">Cart</a>
      </div>

    </div>

  </div>

</header>


    <main class="content" aria-label="Content">
      <div id="product" class="product"></div>

<script>
  $(function () {
    var productId;
    shopClient.fetchProduct('')
    .then(function (product) {
      productId = product.id;
      var productHTML = '\
        <div class="grid">\
          <div class="col-6 text-center">\
            <div class="product-image">\
              <img src="" />\
            </div>\
          </div>\
          <div class="col-6">\
            <h1 class="product-title"></h1>\
            <h2 class="product-sub-title"></h2>\
            <div class="product-description content"></div>\
            <div class="product-form">\
              <div class="product-variant-selector"></div>\
              <div class="product-price"></div>\
              <button class="btn add-to-cart" data-product-id="'+product.id+'" data-variant-id="'+ product.selectedVariant.id+'">Add To Cart</button>\
            </div>\
          </div>\
        </div>';
      $('#product').append(productHTML);

      // Initial values
      var selectedVariant = product.selectedVariant,
          selectedVariantImage = product.selectedVariantImage,
          varCount = product.variants.length;

      // Checks if there are more than one variant, and if so, adds the selectors.
      if (varCount > 1) {
				var variantSelectors = product.options.map(function (option) {
          return '<select name="variant-selection" onchange="handleChange(' + option + ')">' + 
            option.values.map(function(value) {
              return '<option value="' + value + '">' + value + '</option>';
            }).join('\n') +
          '</select>';
        });
        $('.product-variant-selector').html(variantSelectors);
				updateVariantTitle(selectedVariant)
			}
      updateVariantImage(i, selectedVariantImage);
			updateVariantPrice(i, selectedVariant);
      onVariantChange();
      $('.buy-button').on('click', onAddToCart);
    })
    .catch(function () {
      console.log('Request failed');
    });//End "get products"

    // Changes the variant title to the selected variant's title
    function updateVariantTitle(selectedVariant){
      $('.product-sub-title').html(selectedVariant.title);
    }

    // Changes the image to the selected variant's image
    function updateVariantImage(selectedVariantImage){
      var src = (selectedVariantImage) ? selectedVariantImage.src : ShopifyBuy.NO_IMAGE_URI;
      $('.product-image img').attr('src', src);
    }

    // Changes the price to the selected variant's price
    function updateVariantPrice(selectedVariant){
      $('.product-price').text('$' + selectedVariant.price);
    }
    function onVariantChange() {
      $('#product').on('change', 'select[name=variant-selection]', function(event) {
        var element = $(this);
        var productID = productId
        var variantID = element.val();
        var variantName = element.find('option:selected').text();
        
        $('.add-to-cart').attr('data-variant-id', variantID)
        
        client.fetchProduct(productID).then(function(product) {
          for (var i = 0; i < product.variants.length; i++) {
            if (product.variants[i].id == variantID) {
              var selectedVariant = product.variants[i];
              updateVariantImage(selectedVariant.image);
              updateVariantTitle(selectedVariant);
              updateVariantPrice(selectedVariant);
            }
          }
        });
      });
    }
    function onAddToCart(evt) {
      evt.preventDefault();
      var productID = $(this).attr('data-product-id');
      var variantID = $(this).attr('data-variant-id'); 
      var cartLineItem = findCartItemByVariantId(variantID);
      var quantity = cartLineItem ? cartLineItem.quantity + 1 : 1;
      
      client.fetchProduct(productID).then(function(product) {
        for (var i = 0; i < product.variants.length; i++) {
          if (product.variants[i].id == variantID) {
            variantObject = product.variants[i];
            addOrUpdateVariant(cartLineItem, variantObject, quantity);
            setPreviousFocusItem(evt.target);
            $('#checkout').focus();
          }
        }
      });
    }
    function addOrUpdateVariant(cartLineItem, variantObject, quantity) {
      var variantObjectID = variantObject.id;
      if (cartLineItem) {
        updateVariantInCart(cartLineItem, quantity);
      } else {
        addVariantToCart(variantObject, quantity);
      }
      updateCartTabButton();
    }
  });





  function handleChange(select) {
    console.log('option', select)
    var optionName = select.name;
    var selectedValue = select.value;

    var option = product.options.filter(function (option) {
      return option.name === optionName;
    })[0];

    

    option.selected = selectedValue;
  }
</script>
<!--<script>
  $(function () {
    shopClient.fetchProduct('')
    .then(function (product) {
      var selects = product.options.map(function (option) {
        return '<select name="' + option.name + '" onchange="handleChange(' + option + ')">' + 
          option.values.map(function(value) {
            return '<option value="' + value + '">' + value + '</option>';
          }).join('\n') +
        '</select>';
      });
      $('.product-form').prepend(selects);
      $('.product-image').prepend('<img src="'+product.selectedVariantImage.src+'" />');
    })
    .catch(function () {
      console.log('Request failed');
    });
  });
  function handleChange(select) {
    console.log('option', select)
    var optionName = select.name;
    var selectedValue = select.value;

    var option = product.options.filter(function (option) {
      return option.name === optionName;
    })[0];

    

    option.selected = selectedValue;
  }
</script>-->

    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Squidz Apparel</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Squidz Apparel
            
            </li>
            
            <li><a href="mailto:justinpatenaude92@gmail.com">justinpatenaude92@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
